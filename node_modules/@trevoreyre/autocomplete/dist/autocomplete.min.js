var Autocomplete=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(e,t){return e.matches?e.matches(t):e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):null},s=function(e,t){return e.closest?e.closest(t):function(e,t){for(var s=e;s&&1===s.nodeType;){if(n(s,t))return s;s=s.parentNode}return null}(e,t)},o=function(e){return Boolean(e&&"function"==typeof e.then)};return function n(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=u.search,r=u.autoSelect,l=void 0!==r&&r,c=u.setValue,d=void 0===c?function(){}:c,h=u.setAttribute,f=void 0===h?function(){}:h,v=u.onUpdate,p=void 0===v?function(){}:v,b=u.onSubmit,w=void 0===b?function(){}:b,x=u.onShow,R=void 0===x?function(){}:x,I=u.onHide,S=void 0===I?function(){}:I,m=u.onLoading,g=void 0===m?function(){}:m,A=u.onLoaded,k=void 0===A?function(){}:A;e(this,n),t(this,"value",""),t(this,"searchCounter",0),t(this,"results",[]),t(this,"selectedIndex",-1),t(this,"handleInput",(function(e){var t=e.target.value;i.updateResults(t),i.value=t})),t(this,"handleKeyDown",(function(e){var t=e.key;switch(t){case"Up":case"Down":case"ArrowUp":case"ArrowDown":var n="ArrowUp"===t||"Up"===t?i.selectedIndex-1:i.selectedIndex+1;e.preventDefault(),i.handleArrows(n);break;case"Tab":i.selectResult();break;case"Enter":var s=i.results[i.selectedIndex];i.selectResult(),i.onSubmit(s);break;case"Esc":case"Escape":i.hideResults(),i.setValue();break;default:return}})),t(this,"handleFocus",(function(e){var t=e.target.value;i.updateResults(t),i.value=t})),t(this,"handleBlur",(function(){i.hideResults()})),t(this,"handleResultMouseDown",(function(e){e.preventDefault()})),t(this,"handleResultClick",(function(e){var t=e.target,n=s(t,"[data-result-index]");if(n){i.selectedIndex=parseInt(n.dataset.resultIndex,10);var o=i.results[i.selectedIndex];i.selectResult(),i.onSubmit(o)}})),t(this,"handleArrows",(function(e){var t=i.results.length;i.selectedIndex=(e%t+t)%t,i.onUpdate(i.results,i.selectedIndex)})),t(this,"selectResult",(function(){var e=i.results[i.selectedIndex];e&&i.setValue(e),i.hideResults()})),t(this,"updateResults",(function(e){var t=++i.searchCounter;i.onLoading(),i.search(e).then((function(e){t===i.searchCounter&&(i.results=e,i.onLoaded(),0!==i.results.length?(i.selectedIndex=i.autoSelect?0:-1,i.onUpdate(i.results,i.selectedIndex),i.showResults()):i.hideResults())}))})),t(this,"showResults",(function(){i.setAttribute("aria-expanded",!0),i.onShow()})),t(this,"hideResults",(function(){i.selectedIndex=-1,i.results=[],i.setAttribute("aria-expanded",!1),i.setAttribute("aria-activedescendant",""),i.onUpdate(i.results,i.selectedIndex),i.onHide()})),t(this,"checkSelectedResultVisible",(function(e){var t=e.querySelector('[data-result-index="'.concat(i.selectedIndex,'"]'));if(t){var n=e.getBoundingClientRect(),s=t.getBoundingClientRect();s.top<n.top?e.scrollTop-=n.top-s.top:s.bottom>n.bottom&&(e.scrollTop+=s.bottom-n.bottom)}})),this.search=o(a)?a:function(e){return Promise.resolve(a(e))},this.autoSelect=l,this.setValue=d,this.setAttribute=f,this.onUpdate=p,this.onSubmit=w,this.onShow=R,this.onHide=S,this.onLoading=g,this.onLoaded=k}}();
